<fieldset class="flex flex-column gap-2 w-full border-1 border-dashed p-2 ">

    <legend>
        <label [for]="attributes.id" class="ml-1">
            {{attributes.label || 'Please set a label!'}}
        </label>
    </legend>


    <div class="input-wrapper flex flex-row  gap-2 justify-content-start align-items-center">




        <fieldset class="inner-field-set" [disabled]="disabled">

            <ng-content></ng-content>
        </fieldset>



        <ae-hidden-input [control]="control" [attributes]="attributes"></ae-hidden-input>
        <div class="status">

            <p-progressSpinner *ngIf="(isTyping$ | async) " [style]="{width: '45px', height: '45px'}" strokeWidth="4">
            </p-progressSpinner>

            <div class="status-buttons" *ngIf="(isTyping$ | async) ===false">

                <p-button styleClass="p-button-success" icon="pi pi-unlock" *ngIf="isValid() && !disabled"
                    (click)="toggleDisable()" [@enter]>
                </p-button>

                <p-button styleClass="p-button-secondary" icon="pi pi-lock" *ngIf="isValid() && disabled"
                    (click)="toggleDisable()" [@enter]>
                </p-button>

                <p-button styleClass="p-button-danger" icon="pi pi-times" *ngIf="isInvalid()" (click)="control.reset()"
                    [@enter]>
                </p-button>

            </div>
        </div>
    </div>

    <div class="flex justify-content-between gap-2" [@enter]>


        <!-- Min-Max length indicator. -->
        <p-badge [severity]="(control.valid && control.dirty) ? 'success' : !control.dirty ? 'info' : 'danger'"
            *ngIf="attributes.minLength || attributes.maxLength"
            [value]="(control.value?.length || '0')  + ' of ' + (attributes.minLength || '?') + ' - ' + (attributes.maxLength || '?')">
        </p-badge>

        <!-- Select item indicator  -->
        <p-badge *ngIf="attributes.options"
            [severity]="(control.valid && control.dirty) ? 'success' : !control.dirty ? 'info' : 'danger'"
            [value]="'Selected ' +  (control.value?.length || '0')  + ' of ' + attributes.options.length">
        </p-badge>

        <!-- Select item indicator  -->
        <p-badge *ngIf="attributes.min || attributes.max"
            [severity]="(control.valid && control.dirty) ? 'success' : !control.dirty ? 'info' : 'danger'"
            [value]="(control.value || '0')  + ' is less than ' + (attributes.max || ' ? ') + ' and  more than ' + (attributes.min || ' ? ') ">

        </p-badge>

        <i *ngIf="attributes.hint">
            <small>{{attributes.hint.substring(0, 30) }} ... </small>
        </i>

    </div>
</fieldset>