"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[490],{2490:(H,k,n)=>{n.r(k),n.d(k,{CreateProductComponent:()=>l,DeleteProductComponent:()=>m,ProductComponent:()=>h,ProductModule:()=>b,ProductService:()=>c,UpdateProductComponent:()=>v,ViewProductComponent:()=>f});var i=n(4006),E=n(8203),O=n(5964),e=n(4650),Z=n(8802),U=n(529);class c extends O.T{constructor(r,t){super("Product",r,t)}static#e=this.\u0275fac=function(t){return new(t||c)(e.LFG(Z.yV),e.LFG(U.eN))};static#t=this.\u0275prov=e.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"})}var y=n(2335),S=n(3341),w=n(805),a=n(9595),p=n(6895),A=n(4895),C=n(1383),I=n(5593),P=n(3608),u=n(2997);function G(g,r){if(1&g){const t=e.EpF();e.TgZ(0,"mat-step",5),e.ALo(1,"titlecase"),e.TgZ(2,"ae-form",6)(3,"div",7)(4,"p-button",8),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.submit())}),e.qZA()()()()}if(2&g){const t=r.$implicit,o=e.oxw();e.Q6J("label",e.lcZ(1,4,"undefined"===t[0]?"Others":t[0])),e.xp6(2),e.Q6J("formGroup",o.formGroup)("fields",t[1])("submitLabel",!1)}}const Y=function(){return["../"]};class l{constructor(r,t,o,s,d,x){this.productService=r,this.systemMessageService=t,this.router=o,this.route=s,this.categoryService=d,this.departmentService=x,this.submitted=!1,this.title="Create Product",this.formGroup=new i.cw({name:new i.NI(void 0,[i.kI.required,i.kI.minLength(3),i.kI.maxLength(50)]),price:new i.NI(void 0,[i.kI.min(0),i.kI.max(999999999999)]),cost:new i.NI(void 0,[i.kI.min(0),i.kI.max(999999999999)]),quantity:new i.NI(void 0,[i.kI.min(0),i.kI.max(999999999999)]),description:new i.NI(void 0,[i.kI.minLength(0),i.kI.maxLength(500)]),category:new i.NI(void 0,[]),department:new i.NI(void 0,[])}),this.fields=[{name:"name",type:"text",group:"Product",placeholder:"name",required:!0,minLength:3,maxLength:50},{name:"price",type:"currency",group:"Price",placeholder:"price",min:0,max:999999999999},{name:"cost",type:"currency",group:"Price",placeholder:"cost",min:0,max:999999999999},{name:"quantity",type:"number",group:"Quantity",placeholder:"quantity",min:0,max:999999999999},{name:"description",type:"textarea",group:"Product",placeholder:"description",minLength:0,maxLength:500},{name:"category",type:"select",group:"Meta",placeholder:"Select Category",asyncOptions:this.categoryService.entities$,optionValue:"id",optionLabel:"name"},{name:"department",type:"select",group:"Meta",placeholder:"Select Department",asyncOptions:this.departmentService.entities$,optionValue:"id",optionLabel:"name"}],this.groups=Object.entries((0,E.v)(this.fields,"group"))}ngOnInit(){this.categoryService.clearCache(),this.categoryService.getAsOptions(["id","name"]),this.departmentService.clearCache(),this.departmentService.getAsOptions(["id","name"])}submit(){if(!1===this.submitted)if(this.formGroup.valid)this.submitted=!0,this.productService.add({name:this.value("name"),price:this.value("price"),cost:this.value("cost"),quantity:this.value("quantity"),description:this.value("description"),category:this.value("category"),department:this.value("department")});else{const r=Object.entries(this.formGroup.controls).filter(t=>t[1].errors)[0];this.systemMessageService.add({key:"resource",severity:"error",summary:`${r[0]} field is not valid!`})}}value(r){return this.formGroup.get(r)?.value}static#e=this.\u0275fac=function(t){return new(t||l)(e.Y36(c),e.Y36(w.ez),e.Y36(a.F0),e.Y36(a.gz),e.Y36(y.CategoryService),e.Y36(S.DepartmentService))};static#t=this.\u0275cmp=e.Xpm({type:l,selectors:[["ae-create-product"]],decls:8,vars:4,consts:[["icon","pi pi-arrow-left","routerLinkActive","router-link-active","routerLinkActive","router-link-active","pTooltip","Go Back","tooltipPosition","bottom",3,"routerLink"],[1,"flex","flex-column","p-2","w-full"],["labelPosition","bottom"],["stepper",""],[3,"label",4,"ngFor","ngForOf"],[3,"label"],[3,"formGroup","fields","submitLabel"],[1,"flex","justify-content-end"],["type","submit","label","Save Product",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"p-toolbar"),e._UZ(1,"p-button",0),e.TgZ(2,"strong"),e._uU(3),e.qZA()(),e.TgZ(4,"div",1)(5,"mat-stepper",2,3),e.YNc(7,G,5,6,"mat-step",4),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("routerLink",e.DdM(3,Y)),e.xp6(2),e.hij(" ",o.title," "),e.xp6(4),e.Q6J("ngForOf",o.groups))},dependencies:[p.sg,A.U,C.o,I.zx,P.u,i.JL,i.sg,u.C0,u.Vq,a.rH,a.Od,p.rS]})}var L=n(5296),D=n(2137);const N=function(){return["../"]};class m{constructor(r,t,o,s){this.prmConfirmationService=r,this.productService=t,this.router=o,this.route=s,this.title="Delete Product"}ngOnInit(){this.prmConfirmationService.confirm({message:"Are you sure to delete the item?",header:"Delete",icon:"pi pi-times",acceptButtonStyleClass:"p-button-danger",acceptLabel:"Yes, delete item.",accept:()=>{this.productService.deleteItem()},reject:()=>{this.router.navigate(["../"],{relativeTo:this.route})}})}static#e=this.\u0275fac=function(t){return new(t||m)(e.Y36(L.fL),e.Y36(c),e.Y36(a.F0),e.Y36(a.gz))};static#t=this.\u0275cmp=e.Xpm({type:m,selectors:[["ae-delete-product"]],decls:5,vars:3,consts:[["icon","pi pi-arrow-left","routerLinkActive","router-link-active","routerLinkActive","router-link-active","pTooltip","Go Back","tooltipPosition","bottom",3,"routerLink"]],template:function(t,o){1&t&&(e.TgZ(0,"p-toolbar"),e._UZ(1,"p-button",0),e.TgZ(2,"strong"),e._uU(3),e.qZA()(),e._UZ(4,"p-confirmDialog")),2&t&&(e.xp6(1),e.Q6J("routerLink",e.DdM(2,N)),e.xp6(2),e.hij(" ",o.title," "))},dependencies:[C.o,I.zx,P.u,D.Q,a.rH,a.Od]})}class h{constructor(r,t,o,s){this.router=r,this.route=t,this.resourceService=o,this.prmMessageService=s}ngOnInit(){this.sub=this.resourceService.entityActions$.subscribe(r=>{r.type.endsWith("add-one/success")&&(this.prmMessageService.add({key:"resource",severity:"success",summary:"Created"}),this.goHome()),r.type.endsWith("delete-one/success")&&(this.prmMessageService.add({key:"resource",severity:"success",summary:"Deleted"}),this.goHome()),r.type.endsWith("update-one/success")&&(this.prmMessageService.add({key:"resource",severity:"success",summary:"Updated"}),this.goHome()),r.type.endsWith("add-one/error")&&(this.prmMessageService.add({key:"resource",severity:"error",summary:"Not Created"}),this.goHome()),r.type.endsWith("delete-one/error")&&(this.prmMessageService.add({key:"resource",severity:"error",summary:"Not Deleted"}),this.goHome()),r.type.endsWith("update-one/error")&&(this.prmMessageService.add({key:"resource",severity:"error",summary:"Not Updated"}),this.goHome())})}ngOnDestroy(){this.sub.unsubscribe()}goHome(){this.router.navigate(["inventory","product"])}static#e=this.\u0275fac=function(t){return new(t||h)(e.Y36(a.F0),e.Y36(a.gz),e.Y36(c),e.Y36(L.sr))};static#t=this.\u0275cmp=e.Xpm({type:h,selectors:[["ae-product"]],decls:1,vars:0,template:function(t,o){1&t&&e._UZ(0,"router-outlet")},dependencies:[a.lC]})}var T=n(3676),F=n(5861),M=n(9815),V=n(3905);function J(g,r){if(1&g){const t=e.EpF();e.TgZ(0,"mat-step",5),e.ALo(1,"titlecase"),e.TgZ(2,"ae-form",6)(3,"div",7)(4,"p-button",8),e.NdJ("click",function(){e.CHM(t);const s=e.oxw();return e.KtG(s.submit())}),e.qZA()()()()}if(2&g){const t=r.$implicit,o=e.oxw();e.Q6J("label",e.lcZ(1,4,"undefined"===t[0]?"Others":t[0])),e.xp6(2),e.Q6J("formGroup",o.formGroup)("fields",t[1])("submitLabel",!1)}}const Q=function(){return["../"]};class v{constructor(r,t,o,s,d,x){this.productService=r,this.router=t,this.systemMessageService=o,this.route=s,this.categoryService=d,this.departmentService=x,this.title="Update Product",this.formGroup=new i.cw({name:new i.NI(void 0,[i.kI.required,i.kI.minLength(3),i.kI.maxLength(50)]),price:new i.NI(void 0,[i.kI.min(0),i.kI.max(999999999999)]),cost:new i.NI(void 0,[i.kI.min(0),i.kI.max(999999999999)]),quantity:new i.NI(void 0,[i.kI.min(0),i.kI.max(999999999999)]),description:new i.NI(void 0,[i.kI.minLength(0),i.kI.maxLength(500)]),category:new i.NI(void 0,[]),department:new i.NI(void 0,[])}),this.fields=[{name:"name",type:"text",group:"Product",placeholder:"name",required:!0,minLength:3,maxLength:50},{name:"price",type:"currency",group:"Price",placeholder:"price",min:0,max:999999999999},{name:"cost",type:"currency",group:"Price",placeholder:"cost",min:0,max:999999999999},{name:"quantity",type:"number",group:"Quantity",placeholder:"quantity",min:0,max:999999999999},{name:"description",type:"textarea",group:"Product",placeholder:"description",minLength:0,maxLength:500},{name:"category",type:"select",group:"Meta",placeholder:"Select Category",asyncOptions:this.categoryService.entities$,optionValue:"id",optionLabel:"name"},{name:"department",type:"select",group:"Meta",placeholder:"Select Department",asyncOptions:this.departmentService.entities$,optionValue:"id",optionLabel:"name"}],this.groups=Object.entries((0,E.v)(this.fields,"group"))}ngOnInit(){this.categoryService.clearCache(),this.categoryService.getAsOptions(["id","name"]),this.departmentService.clearCache(),this.departmentService.getAsOptions(["id","name"])}ngAfterViewInit(){var r=this;return(0,F.Z)(function*(){const t=r.productService.getItemToBeUpdated();if(t)return r.itemToBeUpdated=yield(0,V.z)(r.productService.getByKey(t.id)),void(0,M.EE)(r.formGroup,r.itemToBeUpdated);r.router.navigate(["../"],{relativeTo:r.route})})()}submit(){if(this.formGroup.valid)this.productService.update({id:this.itemToBeUpdated.id,name:this.value("name"),price:this.value("price"),cost:this.value("cost"),quantity:this.value("quantity"),description:this.value("description"),category:this.value("category"),department:this.value("department")});else{const r=Object.entries(this.formGroup.controls).filter(t=>t[1].errors)[0];this.systemMessageService.add({key:"resource",severity:"error",summary:`${r[0]} field is not valid!`})}}getOptions(r){return JSON.parse(localStorage.getItem(r)||"[]")}value(r){return this.formGroup.get(r)?.value}static#e=this.\u0275fac=function(t){return new(t||v)(e.Y36(c),e.Y36(a.F0),e.Y36(w.ez),e.Y36(a.gz),e.Y36(y.CategoryService),e.Y36(S.DepartmentService))};static#t=this.\u0275cmp=e.Xpm({type:v,selectors:[["ae-update-product"]],decls:8,vars:4,consts:[["icon","pi pi-arrow-left","routerLinkActive","router-link-active","routerLinkActive","router-link-active","pTooltip","Go Back","tooltipPosition","bottom",3,"routerLink"],[1,"flex","flex-column","p-2","w-full"],["labelPosition","bottom"],["stepper",""],[3,"label",4,"ngFor","ngForOf"],[3,"label"],[3,"formGroup","fields","submitLabel"],[1,"flex","justify-content-end"],["type","submit","label","Update Product",3,"click"]],template:function(t,o){1&t&&(e.TgZ(0,"p-toolbar"),e._UZ(1,"p-button",0),e.TgZ(2,"strong"),e._uU(3),e.qZA()(),e.TgZ(4,"div",1)(5,"mat-stepper",2,3),e.YNc(7,J,5,6,"mat-step",4),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("routerLink",e.DdM(3,Q)),e.xp6(2),e.hij(" ",o.title," "),e.xp6(4),e.Q6J("ngForOf",o.groups))},dependencies:[p.sg,A.U,C.o,I.zx,P.u,i.JL,i.sg,u.C0,u.Vq,a.rH,a.Od,p.rS]})}n(289);var $=n(5045);const z=["dataTable"];class f{constructor(r,t,o,s,d){this.productService=r,this.router=t,this.route=o,this.categoryService=s,this.departmentService=d,this.rows=10,this.first=0,this.filters=[],this.sort=[],this.totalRecords$=this.productService.allCount$,this.items$=this.productService.entities$,this.columns=[{header:"#",field:"id"},{header:"UUID",field:"uuid"},{header:"name",field:"name"},{header:"price",field:"price"},{header:"cost",field:"cost"},{header:"quantity",field:"quantity"},{header:"description",field:"description"},{header:"category",field:"category"},{header:"department",field:"department"},{header:"Create Time",field:"createdAt"},{header:"Update Time",field:"updatedAt"},{header:"Delete Time",field:"deletedAt"}]}ngAfterViewInit(){this.productService.query(this.dataTable.table)}newItem(){this.goTo("create")}editItems(){this.goTo("update")}deleteItems(r){this.goTo("delete")}goTo(r,t){this.router.navigate([r],{relativeTo:this.route,queryParams:t})}selectItems(r){this.productService.updateSelection([...r])}handleEvent(){this.productService.query(this.dataTable.table)}static#e=this.\u0275fac=function(t){return new(t||f)(e.Y36(c),e.Y36(a.F0),e.Y36(a.gz),e.Y36(y.CategoryService),e.Y36(S.DepartmentService))};static#t=this.\u0275cmp=e.Xpm({type:f,selectors:[["ae-view-product"]],viewQuery:function(t,o){if(1&t&&e.Gf(z,5),2&t){let s;e.iGM(s=e.CRH())&&(o.dataTable=s.first)}},decls:4,vars:7,consts:[[3,"data","columns","totalRecords","filterEvent","sortEvent","pageEvent","selectEvent","newEvent","editEvent","deleteEvent","clearEvent"],["dataTable",""]],template:function(t,o){1&t&&(e.TgZ(0,"ae-table",0,1),e.NdJ("filterEvent",function(){return o.handleEvent()})("sortEvent",function(){return o.handleEvent()})("pageEvent",function(){return o.handleEvent()})("selectEvent",function(d){return o.selectItems(d)})("newEvent",function(){return o.newItem()})("editEvent",function(){return o.editItems()})("deleteEvent",function(d){return o.deleteItems(d)})("clearEvent",function(){return o.handleEvent()}),e.ALo(2,"async"),e.ALo(3,"async"),e.qZA()),2&t&&e.Q6J("data",e.lcZ(2,3,o.items$))("columns",o.columns)("totalRecords",e.lcZ(3,5,o.totalRecords$))},dependencies:[$.a,p.Ov]})}class b{static#e=this.\u0275fac=function(t){return new(t||b)};static#t=this.\u0275mod=e.oAB({type:b});static#r=this.\u0275inj=e.cJS({providers:[c,y.CategoryService,S.DepartmentService],imports:[p.ez,L.dT,u.T5,a.Bz.forChild([{path:"",component:h,children:[{title:"View Product",path:"",component:f,data:{permission:"READ:PRODUCT"},canActivate:[T.nG]},{title:"Create Product",path:"create",component:l,data:{permission:"WRITE:PRODUCT"},canActivate:[T.nG]},{title:"Update Product",path:"update",component:v,data:{permission:"WRITE:PRODUCT"},canActivate:[T.nG]},{title:"Delete Product",path:"delete",component:m,data:{permission:"WRITE:PRODUCT"},canActivate:[T.nG]}]}])]})}}}]);