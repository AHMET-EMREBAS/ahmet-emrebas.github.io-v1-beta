"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[545,964,408],{5964:(l,c,e)=>{e.d(c,{T:()=>a});var _=e(805),h=e(1135),o=e(4086),u=e(8372),s=e(3900),i=e(4004),n=e(8802),E=e(8203);class a extends n.c8{constructor(t,r,d){super(t,r),this.httpClient=d,this.newQuery$=new h.X({}),this.selections$=new h.X([]),this.allCount$=this.newQuery$.pipe((0,o.g)(400),(0,u.b)(400),(0,s.w)(()=>this.httpClient?.patch(`api/${this.entityName.toLowerCase()}/?query=count&${Object.entries(this.getQuery(this.table)).map(p=>p.join("=")).join("&")}`,{})))}updateSelection(t){this.selections$.next([...t])}getItemToBeUpdated(){const t=this.selections$.getValue(),r=t.pop();return this.selections$.next(t),r}deleteItem(){const t=this.selections$.getValue().pop();t&&this.delete(t.id)}query(t){this.table=t,this.clearCache(),this.getWithQuery(this.getQuery(t)),this.newQuery$.next({})}getQuery(t){return{view:"true",take:t.rows+"",skip:t.first+"",sortOrder:t.sortOrder+"",sortField:t.sortField||"id",where:JSON.stringify(t.filters)}}uniqueBy(t){return this.entities$.pipe((0,i.U)(r=>(0,E.u)(r,t)))}isExist(t,r){return this.getWithQuery({take:"1",where:JSON.stringify({[t]:[{matchMode:_.a6.EQUALS,value:r}]})}).pipe((0,i.U)(d=>d.length>0))}getAsOptions(t){return this.getWithQuery({select:JSON.stringify(["index",...t]),view:"true"})}}},8203:(l,c,e)=>{function _(o,u){const s={};for(const i of o){const n=i[u]||"undefined";s[n]||(s[n]=[]),s[n].push(i)}return s}function h(o,u){const s=[];for(const i of o)s.find(n=>n[u]===i[u])||s.push(i);return s}e.d(c,{u:()=>h,v:()=>_})}}]);